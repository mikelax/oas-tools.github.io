(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[118],{7653:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/features/error-handling",function(){return t(5952)}])},4774:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(5893),o={src:"/_next/static/media/isa.5e2e4cad.svg",height:424,width:923},s=t(5675),i=t.n(s),a=function(e){var n=e.height,t=void 0===n?30:n;return(0,r.jsx)(i(),{className:"isalogo",src:o,height:t,width:70})};function l(e){var n=e.locale;return"es-ES"===(void 0===n?"en-US":n)?(0,r.jsxs)("a",{href:"https://isa.us.es",target:"_blank",rel:"noopener",className:"inline-flex items-center no-underline text-current font-semibold",children:[(0,r.jsx)("span",{className:"mr-2",style:{height:30},children:"Desarrollado por"}),(0,r.jsx)("span",{className:"mr-2",children:(0,r.jsx)(a,{})})]}):(0,r.jsxs)("a",{href:"https://isa.us.es",target:"_blank",rel:"noopener",className:"inline-flex items-center no-underline text-current font-semibold",children:[(0,r.jsx)("span",{className:"mr-2",style:{height:30},children:"Powered by"}),(0,r.jsx)("span",{className:"mr-2",children:(0,r.jsx)(a,{})})]})}},4177:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var r=t(5893),o={src:"/_next/static/media/oaslogo.34d328ed.png",height:1155,width:1170,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABCklEQVR42mMAgfKvDArZV7iKcq4x12aellVlAAIHB4fZDnaO4QyGDF4qYdONwnPvMPzJvsb8iwEIbNWd7B2cHG4DcTaDk5NTrI2s8/+QqYanCu4zrHCLcPCyNXA8qcjgJsIAAq4xdtX2No6vLRlcVlszuJbamzg9CW910p32n4E345SMDkPyPsWMrEucd3KuM6x1CrC19EyxL82/w3Yx5yrX95zrHLkM+XcYEnKuMf7Pu8Pw06fSYqWjh8OWnJsMT4Aa/udc44lgyDwnJJZ7kyE78zzvZVtdp5c2Mk7/QyYbHSh8zBCceUZSigEEsi7yyha/ZDCx5nCe6ujsMNXB3tHHzc+Zm4GBgQEAIZZaQkv0A+oAAAAASUVORK5CYII="},s=t(5675),i=t.n(s);function a(e){var n=e.size,t=void 0===n?35:n;return(0,r.jsx)(i(),{className:"oaslogo",src:o,height:t,width:t})}},7845:function(e,n,t){"use strict";var r=t(5893),o=t(1163),s=t(4774),i=t(4177),a={"en-US":"Question? Give us feedback \u2192","es-ES":"Ap\xf3rtanos feedback \u2192"};n.Z={projectLink:"https://github.com/oas-tools",docsRepositoryBase:"https://github.com/oas-tools/oas-tools.github.io/blob/main/pages",titleSuffix:" \u2013 OAS Tools",search:!0,unstable_flexsearch:!0,defaultMenuCollapsed:!0,floatTOC:!0,nextLinks:!0,prevLinks:!0,darkMode:!0,footer:!0,footerEditLink:function(e){return"es-ES"===e.locale?"Edite esta p\xe1gina en GitHub \u2192":"Edit this page on GitHub \u2192"},feedbackLabels:"feedback",feedbackLink:function(){var e=(0,o.useRouter)().locale;return a[e]||a["en-US"]},footerText:function(e){return(0,s.Z)(e)},logo:function(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{size:35}),(0,r.jsx)("span",{className:"mx-4 font-extrabold hidden md:inline select-none",title:"OAS Tools: A NodeJS OpenAPI Framework",children:"OAS TOOLS"}),(0,r.jsx)("span",{className:"text-gray-500 font-normal hidden md:inline",children:"A NodeJS OpenAPI framework"})]})},head:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/favicon/apple-touch-icon.png"}),(0,r.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/favicon/favicon-32x32.png"}),(0,r.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/favicon/favicon-16x16.png"}),(0,r.jsx)("link",{rel:"manifest",href:"/favicon/site.webmanifest"}),(0,r.jsx)("link",{rel:"mask-icon",href:"/favicon/safari-pinned-tab.svg",color:"#5bbad5"}),(0,r.jsx)("link",{rel:"shortcut icon",href:"/favicon/favicon.ico"}),(0,r.jsx)("meta",{name:"msapplication-TileColor",content:"#ffffff"}),(0,r.jsx)("meta",{name:"msapplication-config",content:"/favicon/browserconfig.xml"}),(0,r.jsx)("meta",{name:"theme-color",content:"#ffffff"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,r.jsx)("meta",{httpEquiv:"Content-Language",content:"en"}),(0,r.jsx)("meta",{name:"description",content:"OAS Tools: A NodeJS OpenAPI framework"}),(0,r.jsx)("meta",{name:"og:description",content:"OAS Tools: A NodeJS OpenAPI framework"}),(0,r.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,r.jsx)("meta",{name:"twitter:image",content:"https://oas-tools.github.io/public/img/og-image.png"}),(0,r.jsx)("meta",{name:"twitter:site:domain",content:"oas-tools.github.io"}),(0,r.jsx)("meta",{name:"twitter:url",content:"https://oas-tools.github.io"}),(0,r.jsx)("meta",{name:"og:title",content:"OAS Tools: A NodeJS OpenAPI framework"}),(0,r.jsx)("meta",{name:"og:image",content:"https://oas-tools.github.io/public/img/og-image.png"}),(0,r.jsx)("meta",{name:"apple-mobile-web-app-title",content:"OAS Tools"}),(0,r.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/apple-icon-180x180.png"}),(0,r.jsx)("link",{rel:"icon",type:"image/png",sizes:"192x192",href:"/android-icon-192x192.png"}),(0,r.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/favicon-32x32.png"}),(0,r.jsx)("link",{rel:"icon",type:"image/png",sizes:"96x96",href:"/favicon-96x96.png"}),(0,r.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/favicon-16x16.png"}),(0,r.jsx)("meta",{name:"msapplication-TileImage",content:"/ms-icon-144x144.png"})]})}},5952:function(e,n,t){"use strict";t.r(n);var r=t(6042),o=t(9396),s=t(5893),i=t(5585),a=t(7308),l=t(7845),c=t(1151),d=(t(5675),[{name:"blog",children:[{name:"articles",children:[{name:"announcingv3",route:"/blog/articles/announcingv3",frontMatter:{image:"oastools3.png",description:"The new OAS Tools version has been finally released. Take a look to all the new features included in OAS Tools v3.0!",date:"2021-08-14T00:00:00.000Z"}},{name:"meta.json",meta:{announcingv3:"OAS Tools v3 is out!"}}],route:"/blog/articles"},{name:"index",route:"/blog",frontMatter:{title:"Blog",searchable:!1}},{name:"meta.json",meta:{index:{type:"page",theme:{sidebar:!1}},articles:{type:"page",theme:{sidebar:!1}}}}],route:"/blog"},{name:"docs",children:[{name:"cli",route:"/docs/cli",frontMatter:{title:"CLI"}},{name:"compatibility",route:"/docs/compatibility",frontMatter:{title:"Compatibility"}},{name:"customization",children:[{name:"custom-loger",route:"/docs/customization/custom-loger",frontMatter:{title:"Custom logger"}},{name:"external-modules",route:"/docs/customization/external-modules",frontMatter:{title:"External Modules"}},{name:"meta.json",meta:{"project-setup":"Advanced project Setup","custom-loger":"Adding a custom logger","external-modules":"External modules"}},{name:"project-setup",route:"/docs/customization/project-setup",frontMatter:{title:"Project Setup"}}],route:"/docs/customization"},{name:"features",children:[{name:"error-handling",route:"/docs/features/error-handling",frontMatter:{title:"Errors"}},{name:"meta.json",meta:{swaggerUI:"Swagger UI",validation:"Validation",routing:"Routing",security:"Security","error-handling":"Handling errors"}},{name:"routing",route:"/docs/features/routing",frontMatter:{title:"Routing"}},{name:"security",route:"/docs/features/security",frontMatter:{title:"Security"}},{name:"swaggerUI",route:"/docs/features/swaggerUI",frontMatter:{title:"SwaggerUI"}},{name:"validation",route:"/docs/features/validation",frontMatter:{title:"Validation"}}],route:"/docs/features"},{name:"fundamentals",children:[{name:"business-logic",route:"/docs/fundamentals/business-logic",frontMatter:{title:"Bussiness logic"}},{name:"config",route:"/docs/fundamentals/config",frontMatter:{title:"Configuration"}},{name:"meta.json",meta:{openapifile:"OpenAPI file",config:"Configuration","business-logic":"Business logic"}},{name:"openapifile",route:"/docs/fundamentals/openapifile",frontMatter:{title:"OpenAPI file"}}],route:"/docs/fundamentals"},{name:"getting-started",children:[{name:"meta.json",meta:{overview:"Overview",quickstart:"Quickstart"}},{name:"overview",route:"/docs/getting-started/overview",frontMatter:{title:"Overview"}},{name:"quickstart",route:"/docs/getting-started/quickstart",frontMatter:{title:"Quickstart"}}],route:"/docs/getting-started"},{name:"meta.json",meta:{"getting-started":"Getting Started",fundamentals:"Fundamentals",features:"Features",cli:"CLI",customization:"Customization",migration:"Migration Guide",compatibility:"Compatibility"}},{name:"migration",route:"/docs/migration",frontMatter:{title:"Migration"}}],route:"/docs"},{name:"meta.json",meta:{docs:{title:"Docs",type:"page"},blog:{title:"Blog",type:"page"}}}]);globalThis.__nextra_internal__={pageMap:d,route:"/docs/features/error-handling"};var h=(0,a.withSSG)((0,i.Z)({filename:"error-handling.mdx",route:"/docs/features/error-handling",meta:{title:"Errors"},pageMap:d,titleText:"Error handling",headings:[{type:"heading",depth:1,children:[{type:"text",value:"Error handling",position:{start:{line:2,column:3,offset:3},end:{line:2,column:17,offset:17}}}],position:{start:{line:2,column:1,offset:1},end:{line:2,column:17,offset:17}},value:"Error handling"},{type:"heading",depth:2,children:[{type:"text",value:"Built-in handler",position:{start:{line:5,column:4,offset:302},end:{line:5,column:20,offset:318}}}],position:{start:{line:5,column:1,offset:299},end:{line:5,column:20,offset:318}},value:"Built-in handler"},{type:"heading",depth:2,children:[{type:"text",value:"Extending the handler",position:{start:{line:16,column:4,offset:1225},end:{line:16,column:25,offset:1246}}}],position:{start:{line:16,column:1,offset:1222},end:{line:16,column:25,offset:1246}},value:"Extending the handler"}],hasH1:!0},l.Z));function u(e){var n=Object.assign({h1:"h1",p:"p",a:"a",code:"code",h2:"h2",table:"table",thead:"thead",tr:"tr",th:"th",strong:"strong",tbody:"tbody",td:"td",div:"div",pre:"pre",span:"span",blockquote:"blockquote"},(0,c.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{children:"Error handling"}),"\n",(0,s.jsxs)(n.p,{children:["OAS Tools internally uses custom error classes that are defined in the ",(0,s.jsx)(n.a,{href:"https://github.com/oas-tools/oas-commons",children:"Commons library"}),". Additionally, the framework has a built-in error handler that is active by default (",(0,s.jsx)(n.code,{children:"middleware.error.disable"})," is set to \xb4false\xb4 in configuration)."]}),"\n",(0,s.jsx)(n.h2,{id:"built-in-handler",children:"Built-in handler"}),"\n",(0,s.jsx)(n.p,{children:"The built-in handler catches the errors produced during the execution flow along the middleware chain and produces a response based on the type of error that has been thrown. The folloing table contanis the description and the response produced by the handler for each error."}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:(0,s.jsx)(n.strong,{children:"Error"})}),(0,s.jsx)(n.th,{children:(0,s.jsx)(n.strong,{children:"Description"})}),(0,s.jsx)(n.th,{align:"center",children:(0,s.jsx)(n.strong,{children:"Handler response"})})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"RequestValidationError"})}),(0,s.jsx)(n.td,{children:"Error thrown when the response content or content-type is invalid"}),(0,s.jsxs)(n.td,{align:"center",children:[(0,s.jsx)(n.code,{children:"500 Internal Server Error"})," or ",(0,s.jsx)(n.code,{children:"406 Not Accepted"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"SecurityError"})}),(0,s.jsx)(n.td,{children:"Error thrown when missing required credentials"}),(0,s.jsx)(n.td,{align:"center",children:(0,s.jsx)(n.code,{children:"401 Unauthorized"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"AuthError"})}),(0,s.jsx)(n.td,{children:"Error thrown when request credentials are invalid or lack privileges"}),(0,s.jsx)(n.td,{align:"center",children:(0,s.jsx)(n.code,{children:"403 Forbidden"})})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["Other classes, like ",(0,s.jsx)(n.code,{children:"ConfigError"}),", ",(0,s.jsx)(n.code,{children:"UnsupportedError"})," and ",(0,s.jsx)(n.code,{children:"RoutingError"})," are not handled by the built-in middleware since they are thrown upon initialization and not during the request process."]}),"\n",(0,s.jsx)(n.h2,{id:"extending-the-handler",children:"Extending the handler"}),"\n",(0,s.jsxs)(n.p,{children:["As mentioned in the ",(0,s.jsx)(n.a,{href:"../fundamentals/config",children:"Configuration section"}),", the built-in error handler may be extended by providing a custom function for handling new errors. That function is set in configuration and is executed right after the built-in handler."]}),"\n",(0,s.jsx)(n.div,{"data-rehype-pretty-code-fragment":"","data-nextra-code":"",children:(0,s.jsx)(n.pre,{children:(0,s.jsxs)(n.code,{"data-language":"js","data-theme":"default",children:[(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-comment)"},children:"// oastools.config.js"})}),"\n",(0,s.jsx)(n.span,{className:"line"}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"module"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"."}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"exports"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  middleware"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    error"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"customHandler"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" (err"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" send) "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,s.jsxs)(n.span,{className:"line",children:[(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" ("}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"err"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:".name "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"==="}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"JsonWebTokenError"'}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"send"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"403"}),(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:");"})]}),"\n",(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"      }"})}),"\n",(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,s.jsx)(n.span,{className:"line",children:(0,s.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})})}),"\n",(0,s.jsx)(n.p,{children:"The custom handler function must take two arguments: the error and a send function. The example above shows how to handle an error thrown by JWT Node.js library. The send function takes one mandatory argument, which is the status code of the response, and optionally can take the response body that will be sent to client."}),"\n",(0,s.jsxs)(n.p,{children:["By default, the errors are sent to client as an object following the following format ",(0,s.jsx)(n.code,{children:'{error: "<error name>: <error message>" }'})," but it can be overridden setting the second parameter in the ",(0,s.jsx)(n.code,{children:"send"})," function received in the handler arguments."]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["Errors are printed to console using the configured logger, if you want to use a custom logger check the ",(0,s.jsx)(n.a,{href:"../customization/custom-loger",children:"custom logger"})," section."]}),"\n"]})]})}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,c.ah)(),e.components),t=n.wrapper;return t?(0,s.jsx)(t,(0,o.Z)((0,r.Z)({},e),{children:(0,s.jsx)(u,(0,r.Z)({},e))})):u(e)}function p(e){return(0,s.jsx)(h,(0,o.Z)((0,r.Z)({},e),{children:(0,s.jsx)(m,{})}))}p.getLayout=h.getLayout,n.default=p}},function(e){e.O(0,[873,743,774,888,179],(function(){return n=7653,e(e.s=n);var n}));var n=e.O();_N_E=n}]);